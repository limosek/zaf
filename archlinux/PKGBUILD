pkgname="zaf-git"
pkgver=${PKGVER:-autogenerated}
pkgrel=${PKGREL:-1}
pkgdesc="zabbix agent framework - a cli tool for zabbix"
arch=("i686" "x86_64")
license=("GPL")
depends=(
    "lsb-release"
    "git"
)
backup=(
    "etc/zaf.conf"
)
source=(
    "zaf-git::git://github.com/limosek/zaf#branch=master"
)
md5sums=("SKIP")

pkgver() {
    cd "$srcdir/$pkgname"
    local date=$(git log -1 --format="%cd" --date=short | sed s/-//g)
    local count=$(git rev-list --count HEAD)
    local commit=$(git rev-parse --short HEAD)
    echo "$date.${count}_$commit"
}

build() {
    cd "$srcdir/$pkgname"

    :
}

package() {
    cd "$srcdir/$pkgname"

    INSTALL_PREFIX="$pkgdir" \
        ./install.sh auto
}
